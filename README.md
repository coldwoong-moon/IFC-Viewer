# IFC Viewer - CHD 기반 3D 건축 모델 뷰어

🏗️ **CHD (Construction Hybrid Data) 포맷**을 기반으로 한 고성능 IFC 3D 뷰어입니다.

## 🎯 프로젝트 목표

### 핵심 목표
- **IFC 파일의 효율적인 웹 기반 3D 시각화**
- **CHD 포맷을 통한 최적화된 데이터 구조**
- **사용자 친화적인 건축 모델 탐색 경험**
- **철근을 포함한 상세 부재 표시**

### 기술적 목표
- IFC → CHD 자동 변환 및 프로젝트 관리
- manifest.json 기반 메타데이터 관리
- 대용량 건축 모델 지원 (50만+ 요소)
- 실시간 3D 렌더링 (60fps 목표)

## 🚀 주요 기능

### 📁 프로젝트 관리
- **IFC 자동 변환**: IFC 파일 업로드 시 CHD 프로젝트 폴더 자동 생성
- **프로젝트 브라우저**: 변환된 CHD 프로젝트 목록 조회 및 선택
- **메타데이터 관리**: manifest.json 기반 프로젝트 정보 추적
- **메모리 사용량 표시**: CHD 기반 정확한 메모리 사용량 예측

### 🎨 3D 렌더링
- **향상된 조명**: 그라데이션 제거로 부재 형상의 디테일한 인식
- **다방향 조명**: 5개 방향 조명으로 균등한 시각화
- **MeshPhongMaterial**: 선명한 형상 표현을 위한 고급 재질
- **양면 렌더링**: 내부 구조도 확인 가능

### 🖱️ 사용자 친화적 조작
- **최적화된 마우스 컨트롤**: 건축 모델 뷰잉에 특화된 설정
- **키보드 지원**: 화살표 키로 모델 탐색
- **스마트 줌**: 건축 모델에 적합한 줌 범위 (10 ~ 50,000)
- **시점 제한**: 바닥 아래로 가지 않는 카메라 각도 제한

### 🔩 철근 표시
- **자동 철근 감지**: 키워드, 타입, 형상 분석을 통한 철근 요소 식별
- **전용 렌더링**: 금속성 재질로 철근의 사실적 표현
- **가시성 토글**: 철근 표시/숨김 기능
- **스마트 배치**: 구조물 내부에 자연스러운 철근 배치

## 🏗️ 시스템 아키텍처

### CHD 포맷 구조
```
project.chd/
├── manifest.json      # 프로젝트 메타데이터
├── geometry/          # 3D 형상 데이터 (CBOR)
│   └── chunk_001.bin
├── attributes/        # 재료 및 속성 데이터
│   ├── materials.cbor
│   └── properties.cbor
├── relations/         # 요소 간 관계 정보
│   ├── hierarchy.json
│   └── references.json
```

### 기술 스택
- **Frontend**: Three.js, Vanilla JavaScript
- **Backend**: Node.js, Express
- **포맷**: CHD (CBOR 기반), IFC 지원
- **3D 엔진**: Three.js WebGL
- **UI**: CSS3, HTML5

## 📊 성능 지표

### 처리 성능
- **파일 크기**: IFC 대비 30-50% 압축률
- **로딩 속도**: CHD 기반 3-5배 빠른 로딩
- **메모리 효율**: 압축된 데이터로 메모리 사용량 최적화
- **렌더링**: 60fps 목표 달성

### 지원 규모
- **최대 요소 수**: 500,000+ 건축 요소
- **카메라 거리**: Far plane 500,000 단위
- **동시 표시**: 모든 건축 부재 + 철근 동시 렌더링

## 🎮 사용법

### 1. 서버 시작
```bash
npm install
npm run viewer
```

### 2. 웹 브라우저에서 접속
```
http://localhost:8080
```

### 3. IFC 파일 업로드
1. "Upload CHD/IFC File" 버튼 클릭
2. IFC 파일 선택 (자동으로 CHD 프로젝트로 변환)
3. 변환 완료 후 3D 모델 자동 표시

### 4. CHD 프로젝트 로딩
1. "🔄 Refresh" 버튼으로 프로젝트 목록 새로고침
2. 드롭다운에서 원하는 CHD 프로젝트 선택
3. "Load Project" 버튼으로 로딩

### 5. 3D 뷰어 조작
- **좌클릭 + 드래그**: 회전
- **우클릭 + 드래그**: 팬 이동
- **휠**: 줌 인/아웃
- **화살표 키**: 모델 탐색
- **🔩 버튼**: 철근 표시/숨김
- **🔗 버튼**: 와이어프레임 모드

## 📈 진척 상황

### ✅ 완료된 기능
- [x] CHD 프로젝트 기반 파일 관리 시스템
- [x] IFC → CHD 자동 변환 및 저장
- [x] manifest.json 기반 메타데이터 관리
- [x] 향상된 3D 조명 시스템 (그라데이션 제거)
- [x] 사용자 친화적 마우스 조작
- [x] 철근 자동 감지 및 표시 기능
- [x] CHD 기반 메모리 사용량 측정
- [x] 대용량 모델 지원 (far plane 500,000)

### 🚧 개발 중
- [ ] IFC 색상 정보 추출 및 적용
- [ ] CHD 프로젝트 내보내기/가져오기
- [ ] 성능 통계 대시보드

### 🔮 향후 계획
- [ ] 실시간 협업 기능
- [ ] AR/VR 지원
- [ ] 건축 도면 2D 뷰
- [ ] 건설 시뮬레이션

## 🛠️ 개발 환경

### 필수 요구사항
- Node.js 18.0.0+
- 모던 웹 브라우저 (Chrome, Firefox, Safari, Edge)
- WebGL 지원

### 선택 요구사항
- Chrome DevTools (개발자 모드)
- IFC 파일 (건축 모델 테스트용)

## 📞 지원 및 기여

### 문의사항
- GitHub Issues: [IFC-Viewer 이슈 트래커](https://github.com/coldwoong-moon/IFC-Viewer/issues)
- 이메일: [프로젝트 이메일]

### 기여 방법
1. Fork 후 개발 브랜치 생성
2. 기능 개발 및 테스트
3. Pull Request 제출
4. 코드 리뷰 후 병합

---

**🏗️ CHD (Construction Hybrid Data) 포맷으로 건축 데이터의 새로운 표준을 제시합니다.**

*Made with ❤️ for the architecture and construction industry*